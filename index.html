<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Exposición 360°</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css"/>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css"/>
</head>
<body>
<main>
    <header id="logo">
        <img width="180px" src="images/expo-bbraun.svg">
    </header>
    <div id="panorama" class="background full"></div>
    <audio id="sound">
        <source src="sound/sound.mp3">
    </audio>
</main>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>

<script>
    pannellum.viewer('panorama', {   
        "default": {
            "autoLoad": true,
            "firstScene": "image1",
            "sceneFadeDuration": 1000,
            "compass" : true,
            "autoRotate" : -3,
            "mouseZoom" : false
        },
    
        "scenes": {
            "image1": {
                "title": "Pasillo de Exposiciones",
                "hfov": 100,
                "pitch": 0,
                "yaw": 0,
                "type": "equirectangular",
                "panorama": "images/pasillo.jpg",
                "hotSpots": [
                    {
                        "pitch": -10,
                        "yaw": 51,
                        "type": "scene",
                        "text": "Ir a Sala de Hospitalización",
                        "sceneId": "image2",
                        "targetYaw": -23,
                        "targetPitch": 2
                    },
                    
                    {
                        "pitch": -8,
                        "yaw": 140,
                        "type": "scene",
                        "text": "Ir a Terapias Ambulatorias",
                        "sceneId": "image3",
                        "targetYaw": -23,
                        "targetPitch": 2
                    },
                    {
                        "pitch": -8,
                        "yaw": -35,
                        "type": "scene",
                        "text": "Ir a Unidad de Cuidados Intensivos",
                        "sceneId": "image4",
                        "targetYaw": -23,
                        "targetPitch": 2
                    },
                    {
                        "pitch": -8,
                        "yaw": -115,
                        "type": "scene",
                        "text": "Ir a Sala de Operaciones",
                        "sceneId": "image5",
                        "targetYaw": -23,
                        "targetPitch": 2
                    }
                ]
            },
    
            "image2": {
                "title": "Hospitalización",
                "hfov": 100,
                "yaw": 5,
                "type": "equirectangular",
                "panorama": "images/hospitalizacion.jpg",
                "hotSpots": [
                    {
                        "pitch": -8,
                        "yaw": 182,
                        "type": "scene",
                        "text": "Regresar a Pasillo",
                        "sceneId": "image1",
                        "targetYaw": -23,
                        "targetPitch": 2
                    },
                    {
                        "pitch": -10,
                        "yaw": 245,
                        "cssClass": "hotspot-fluidoterapia hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Fluidoterapia - Isofundin",
                        "clickHandlerFunc" : hospitalizacion,
                        "clickHandlerArgs" : "hotspot-fluidoterapia"
                    },
                    {
                        "pitch": -10,
                        "yaw": 225,
                        "cssClass": "hotspot-compactplus hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Bombas Infusomat y Perfusor Space / Compact Plus",
                        "clickHandlerFunc" : hospitalizacion,
                        "clickHandlerArgs" : "hotspot-compactplus"
                    },
                    {
                        "pitch": 1,
                        "yaw": 265,
                        "cssClass": "hotspot-safetyw hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Introcan Safety W",
                        "clickHandlerFunc" : hospitalizacion,
                        "clickHandlerArgs" : "hotspot-safetyw"
                    },
                    {
                        "pitch": -10,
                        "yaw": 255,
                        "cssClass": "hotspot-plusyspecial hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Nutriflex Peri, Plus y Special",
                        "clickHandlerFunc" : hospitalizacion,
                        "clickHandlerArgs" : "hotspot-plusyspecial"
                    },
                    {
                        "pitch": -10,
                        "yaw": 285,
                        "cssClass": "hotspot-heridasbbraun hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Linea De Curacion De Heridas Bbraun",
                        "clickHandlerFunc" : hospitalizacion,
                        "clickHandlerArgs" : "hotspot-heridasbbraun"
                    },
                    {
                        "pitch": -10,
                        "yaw": 295,
                        "cssClass": "hotspot-ecoflac hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Ecoflac®",
                        "clickHandlerFunc" : hospitalizacion,
                        "clickHandlerArgs" : "hotspot-ecoflac"
                    },
                ]
            },
            "image3": {
                "title": "Sala Ambulatoria",
                "hfov": 100,
                "yaw": 5,
                "type": "equirectangular",
                "panorama": "images/ambulatorio.jpg",
                "hotSpots": [
                    {
                        "pitch": -8,
                        "yaw": 182,
                        "type": "scene",
                        "text": "Regresar a Pasillo",
                        "sceneId": "image1",
                        "targetYaw": -23,
                        "targetPitch": 2
                    },
                    {
                        "pitch": -10,
                        "yaw": 265,
                        "cssClass": "hotspot-celcite hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Cateter Port - Celsite",
                        "clickHandlerFunc" : ambulatorio,
                        "clickHandlerArgs" : "hotspot-celcite"
                    },
                    {
                        "pitch": -8,
                        "yaw": 395,
                        "cssClass": "hotspot-celcite hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Cateter Port - Celsite",
                        "clickHandlerFunc" : ambulatorio,
                        "clickHandlerArgs" : "hotspot-celcite"
                    },
                    {
                        "pitch": 1,
                        "yaw": 265,
                        "cssClass": "hotspot-bombainfusion hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Bombas de Infusion Space y Compact Plus",
                        "clickHandlerFunc" : ambulatorio,
                        "clickHandlerArgs" : "hotspot-bombainfusion"
                    },
                    {
                        "pitch": -10,
                        "yaw": 255,
                        "cssClass": "hotspot-infusores hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Infusores Elastoméricos - EasyPump II",
                        "clickHandlerFunc" : ambulatorio,
                        "clickHandlerArgs" : "hotspot-infusores"
                    },
                    {
                        "pitch": -5,
                        "yaw": 100,
                        "cssClass": "hotspot-ecoflac hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Ecoflac®",
                        "clickHandlerFunc" : ambulatorio,
                        "clickHandlerArgs" : "hotspot-ecoflac"
                    },
                    {
                        "pitch": 2,
                        "yaw": 391,
                        "cssClass": "hotspot-ecoflac hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Ecoflac®",
                        "clickHandlerFunc" : ambulatorio,
                        "clickHandlerArgs" : "hotspot-ecoflac"
                    },
                    {
                        "pitch": -5,
                        "yaw": 80,
                        "cssClass": "hotspot-prontosan hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Prontosan®",
                        "clickHandlerFunc" : ambulatorio,
                        "clickHandlerArgs" : "hotspot-prontosan"
                    },
                    {
                        "pitch": -4,
                        "yaw": 242,
                        "cssClass": "hotspot-linovera hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Linovera®",
                        "clickHandlerFunc" : ambulatorio,
                        "clickHandlerArgs" : "hotspot-linovera"
                    },
                    {
                        "pitch": -4,
                        "yaw": 340,
                        "cssClass": "hotspot-hemodiafiltracion hotspot-ring",
                        "createTooltipFunc": hotspot,
                        "createTooltipArgs": "Hemodiafiltracion",
                        "clickHandlerFunc" : ambulatorio,
                        "clickHandlerArgs" : "hotspot-hemodiafiltracion"
                    }
                ]
            },
            "image4": {
                "title": "Sala Ambulatoria",
                "hfov": 100,
                "yaw": 5,
                "type": "equirectangular",
                "panorama": "images/uci.jpg",
                "hotSpots": [
                    {
                        "pitch": -8,
                        "yaw": 182,
                        "type": "scene",
                        "text": "Regresar a Pasillo",
                        "sceneId": "image1",
                        "targetYaw": -23,
                        "targetPitch": 2
                    }
                ]
            },
            "image5": {
                "title": "Sala de Operaciones",
                "hfov": 100,
                "yaw": 5,
                "type": "equirectangular",
                "panorama": "images/operaciones.jpg",
                "hotSpots": [
                    {
                        "pitch": -8,
                        "yaw": 182,
                        "type": "scene",
                        "text": "Regresar a Pasillo",
                        "sceneId": "image1",
                        "targetYaw": -23,
                        "targetPitch": 2
                    }
                ]
            }
        }
    });

    function readTextFile(file, callback) {
        var rawFile = new XMLHttpRequest();
        rawFile.overrideMimeType("application/json");
        rawFile.open("GET", file, true);
        rawFile.onreadystatechange = function() {
            if (rawFile.readyState === 4 && rawFile.status == "200") {
                callback(rawFile.responseText);
            }
        }
        rawFile.send(null);
    }

window.onload = function() {
        //accionPlay();
    }
    function accionPlay(){  
        var sound = document.getElementById('sound');
        sound.volume = 0.05;
        sound.play();    
    }

function ambulatorio (event, args){
    //console.log(args);
    document.getElementById("item-title").textContent='';
    document.getElementById("item-description").textContent='';
    document.getElementById("item-image").src='';
    readTextFile("json/ambulatorio.json", function(text){
        var lista = JSON.parse(text);
        for(var k in lista) {
            var productos = lista[k];
            for(item of productos){
                if(item.id === args){
                    document.getElementById("item-title").textContent=item.title;
                    document.getElementById("item-description").textContent=item.description;
                    document.getElementById("item-image").src='images/productos/ambulatorios/'+item.image;
                    document.getElementById("item-link1").href=item.link1;
                    document.getElementById("item-link2").href=item.link2;
                    document.getElementById("item-link3").href=item.link3;
                }
            }
        }
    });    
    var myModal = new bootstrap.Modal(document.getElementById("ModalItem"), {});
    myModal.show();
}
function hospitalizacion (event, args){
    //console.log(args);
    document.getElementById("item-title").textContent='';
    document.getElementById("item-description").textContent='';
    document.getElementById("item-image").src='';
    readTextFile("json/hospitalizacion.json", function(text){
        var lista = JSON.parse(text);
        for(var k in lista) {
            var productos = lista[k];
            for(item of productos){
                if(item.id === args){
                    document.getElementById("item-title").textContent=item.title;
                    document.getElementById("item-description").textContent=item.description;
                    document.getElementById("item-image").src='images/productos/hospitalizacion/'+item.image;
                    document.getElementById("item-link1").href=item.link1;
                    document.getElementById("item-link2").href=item.link2;
                    document.getElementById("item-link3").href=item.link3;
                }
            }
        }
    });    
    var myModal = new bootstrap.Modal(document.getElementById("ModalItem"), {});
    myModal.show();
}

function uci (event, args){
    //console.log(args);
    document.getElementById("item-title").textContent='';
    document.getElementById("item-description").textContent='';
    document.getElementById("item-image").src='';
    readTextFile("json/cuidadosIntensivos.json", function(text){
        var lista = JSON.parse(text);
        for(var k in lista) {
            var productos = lista[k];
            for(item of productos){
                if(item.id === args){
                    document.getElementById("item-title").textContent=item.title;
                    document.getElementById("item-description").textContent=item.description;
                    document.getElementById("item-image").src='images/productos/uci/'+item.image;
                    document.getElementById("item-link1").href=item.link1;
                    document.getElementById("item-link2").href=item.link2;
                    document.getElementById("item-link3").href=item.link3;
                }
            }
        }
    });    
    var myModal = new bootstrap.Modal(document.getElementById("ModalItem"), {});
    myModal.show();
}
function operaciones (event, args){
    //console.log(args);
    document.getElementById("item-title").textContent='';
    document.getElementById("item-description").textContent='';
    document.getElementById("item-image").src='';
    readTextFile("json/operacion.json", function(text){
        var lista = JSON.parse(text);
        for(var k in lista) {
            var productos = lista[k];
            for(item of productos){
                if(item.id === args){
                    document.getElementById("item-title").textContent=item.title;
                    document.getElementById("item-description").textContent=item.description;
                    document.getElementById("item-image").src='images/productos/operaciones/'+item.image;
                    document.getElementById("item-link1").href=item.link1;
                    document.getElementById("item-link2").href=item.link2;
                    document.getElementById("item-link3").href=item.link3;
                }
            }
        }
    });    
    var myModal = new bootstrap.Modal(document.getElementById("ModalItem"), {});
    myModal.show();
}
    // Hot spot creation function
function hotspot(hotSpotDiv, args) {
    hotSpotDiv.classList.add('custom-tooltip');
    var span = document.createElement('span');
    span.innerHTML = args;
    hotSpotDiv.appendChild(span);
    span.style.width = span.scrollWidth - 20 + 'px';
    span.style.marginLeft = -(span.scrollWidth - hotSpotDiv.offsetWidth) / 2 + 'px';
    span.style.marginTop = -span.scrollHeight - 12 + 'px';
}

</script>


<div id="ModalItem" class="modal" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 id="item-title" class="modal-title"></h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div class="info-icon">
                <img src="images/icon_info.png"/>
            </div>
            <div class="container">
                <div class="row align-items-start">
                  <div class="col-6">
                    <figure class="figure">
                        <img id="item-image" class="figure-img img-fluid rounded back-img" src="">
                    </figure>
                  </div>
                  <div class="col-6">
                    <h4 class="subtitle">Descripción del producto</h4>
                    <p id="item-description"></p>
                    <h4 class="subtitle">Links de contenido</h4>
                    <a id="item-link1" class="btn btn-primary" target="_blank" href="#">Link</a>
                    <a id="item-link2" class="btn btn-primary" target="_blank" href="#">Link</a>
                    <a id="item-link3" class="btn btn-primary" target="_blank" href="#">Link</a>
                  </div>
                </div>
            </div>

        </div>
      </div>
    </div>
  </div>

</body>
</html>